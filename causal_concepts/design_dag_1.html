
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Directed acyclic graphs (DAGs) #1 (basics) &#8212; Birth Outcomes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=afe5de03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'causal_concepts/design_dag_1';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DAGs #2 (advanced concepts)" href="design_dag_2.html" />
    <link rel="prev" title="Counterfactuals" href="design_counterfactuals.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Birth Outcomes</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Birth outcomes summary
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../background/background.html">Background</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../background/stages.html">Stages of pregnancy and birth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/interventions.html">Interventions during labour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/research_groups.html">Research groups</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../outcomes/outcomes.html">Identifying hypoxic ischaemic encephalopathy (HIE)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_background.html">Examples of identifying HIE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_summary.html">Summary of possible indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_cooling.html">Therapeutic hypothermia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_hie_diagnosis.html">Diagnostic codes for HIE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_blood.html">Umbilical cord blood gas analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_sentinel.html">Sentinel events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_resus.html">Resuscitation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_meconium.html">Meconium-stained amniotic fluid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_care.html">Transfer to neonatal care services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_cp.html">Cerebral palsy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_mri.html">Neuroimaging evidence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_enceph_symptoms.html">Symptoms of neonatal encephalopathy (NE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_apgar.html">Apgar scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_death.html">Death</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_ctg.html">Abnormal CTG</a></li>

</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">Study design - causal concepts</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="design_intro_1_treatment_paradox.html">The treatment paradox</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_intro_2_predict_vs_causal.html">Choosing between prediction and causal inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_intro_3_causal.html">Causal inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_counterfactuals.html">Counterfactuals</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Directed acyclic graphs (DAGs) #1 (basics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_dag_2.html">DAGs #2 (advanced concepts)</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_sem.html">Structural equation modelling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../design_methods/intro.html">Study design - causal methods</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_causal_assumptions.html">Causal assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_causal_estimands.html">Causal estimands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_target_trial.html">Target trial emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_observational.html">Observational study designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_methods_1_intro.html">Methods #1: Introduction to methods to adjust for confounding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_methods_2_conventional.html">Methods #2: Conventional approaches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_methods_3_gmethods.html">Methods #3: G-methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_methods_4_unobserved.html">Methods #4: Methods for unobserved confounding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_methods_5_other.html">Methods #5: Other</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design_methods/design_other.html">Other design considerations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples/intro.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/obstetric_examples.html">Obstetric studies that address the treatment paradox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/instrumental_variables.html">Instrumental variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../our_study/design_plan.html">Our study</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendices/intro.html">Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../our_study/our_dag.html">HIE DAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../our_study/our_target_trial_protocol.html">HIE target trial protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/neo_out_enceph_treatment_outcomes.html">Challenge 2: Outcomes for trials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/neo_out_chorio.html">More on chorioamnionitis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/fetal_risk_factors.html">Fetal risk factors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/parental_outcomes.html">Parental outcomes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/routine_data.html">Routinely collected data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/key_papers.html">Key Papers</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcausal_concepts/design_dag_1.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/causal_concepts/design_dag_1.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Directed acyclic graphs (DAGs) #1 (basics)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-causal-diagrams">Introduction to causal diagrams</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-causal-diagrams">What are causal diagrams?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-conventions">Naming conventions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-create-causal-diagrams">Why do we create causal diagrams?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-components">Key components</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#confounders">Confounders</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#moderators">Moderators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mediators">Mediators</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#how-is-cde-estimated">How is CDE estimated?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#over-adjustment-bias">Over-adjustment bias</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colliders">Colliders</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selection-nodes">Selection nodes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement-error-mis-measured-variables">Measurement error (mis-measured variables)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-you-know-what-to-include-in-your-dag">How do you know what to include in your DAG?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dag-completeness">DAG completeness</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-you-know-when-to-include-mediators">How do you know when to include mediators?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-should-you-draw-arrows">When should you draw arrows?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#can-you-use-variable-selection-methods">Can you use variable selection methods?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-you-create-a-dag">How do you create a DAG?</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="directed-acyclic-graphs-dags-1-basics">
<h1>Directed acyclic graphs (DAGs) #1 (basics)<a class="headerlink" href="#directed-acyclic-graphs-dags-1-basics" title="Link to this heading">#</a></h1>
<div class="info admonition">
<p class="admonition-title">Executive summary</p>
<p>Causal diagrams (directed acyclic graphs - DAGs) are based on expert knowledge. They depict the causal relationships between nodes using directed arrows. They are used to illustrate/identify sources of bias, to indicate where associations/independence should be expected, and to help inform study design.</p>
<p>In a DAG, you can identify:</p>
<ul class="simple">
<li><p><strong>Confounders</strong> - common cause both treatment and outcome</p></li>
<li><p><strong>Mediators</strong> - lie on causal path between variables, inclusion depends on whether you are interested in direct effect of treatment and outcome that doesn’t pass through mediator</p></li>
<li><p><strong>Colliders</strong> - common effect of two other variables</p></li>
<li><p><strong>Moderators</strong> - change size or direction of relationship between variables</p></li>
</ul>
<p>You start the diagram with your research question (i.e. two nodes whose relationship you are interested) and then add all <strong>common</strong> causes for those nodes, and for any other nodes you add to the graph.</p>
</div>
<section id="introduction-to-causal-diagrams">
<h2>Introduction to causal diagrams<a class="headerlink" href="#introduction-to-causal-diagrams" title="Link to this heading">#</a></h2>
<section id="what-are-causal-diagrams">
<h3>What are causal diagrams?<a class="headerlink" href="#what-are-causal-diagrams" title="Link to this heading">#</a></h3>
<p>Causal diagrams - <strong>directed acyclic graphs (DAGs)</strong> - depict causal relationship between different variables. Two key components are <strong>nodes</strong> and <strong>arrows</strong>.</p>
<p>They are:</p>
<ul class="simple">
<li><p><strong>Directed</strong> - as arrows have a single direction (unidirectional) that represents known causal effects (based on prior knowledge)</p></li>
<li><p><strong>Acyclic</strong> - as nodes cannot have a directed path from itself back to itself <a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
<p>Example:</p>
<div class="mermaid">
              flowchart LR;

    asp(&quot;Aspirin&quot;):::white;
    str(&quot;Stroke&quot;):::white;

    asp --&gt; str;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
        </div><p>‘Relationships between variables in a DAG can also be described using structural equations, so called because they describe causal relationships rather than observed associations. A set of structural equations can sometimes be rewritten as a single reduced form equation.’ <a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p>
</section>
<section id="naming-conventions">
<h3>Naming conventions<a class="headerlink" href="#naming-conventions" title="Link to this heading">#</a></h3>
<p>There are naming conventions for particular components of the DAG:</p>
<ul class="simple">
<li><p><strong>A (or E)</strong> = Exposure / Treatment / Intervention / Primary IV</p></li>
<li><p><strong>Y (or D)</strong> = Outcome</p></li>
<li><p><strong>C</strong> = Covariates / Confounders</p></li>
<li><p><strong>U</strong> = Unmeasured relevant variables</p></li>
</ul>
<p>When letters are not used, the exposure and outcome will often be highlighted using a “?” on the arrow, or through coloured boxes or arrows.</p>
<p>Example:</p>
<div class="mermaid">
              flowchart LR;

    A:::green;
    Y:::green;
    C:::white;
    U:::white;
    
    A --&gt;|?| Y;
    C --&gt; A;
    C --&gt; Y;
    U --&gt; A;
    U --&gt; C;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
    classDef green fill:#DDF2D1, stroke: #FFFFFF;
        </div><p>Nodes can also be described as:</p>
<ul class="simple">
<li><p><strong>Ancestor</strong> = direct cause (<strong>parent</strong>) or indirect cause (e.g. <strong>grandparent</strong>) of a variable</p></li>
<li><p><strong>Descendent</strong> = direct effect (<strong>child</strong>) or indirect effect (e.g. <strong>grandchild</strong>) of a variable <a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
</section>
<section id="why-do-we-create-causal-diagrams">
<h3>Why do we create causal diagrams?<a class="headerlink" href="#why-do-we-create-causal-diagrams" title="Link to this heading">#</a></h3>
<p>We don’t draw causal diagrams as an exact, accurate representation of the world - instead, we draw causal DAGs to help us think about possible sources of bias when making causal inferences.</p>
<ul class="simple">
<li><p>They make sure we illustrate and identify our sources of biases (assumptions)</p>
<ul>
<li><p>More precise and efficient than writing pages of assumptions<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
<li><p>Although they are based on assumptions, so are analytic models.<a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a></p></li>
<li><p>Although investigators often feel some discomfort in deciding what causal effects do and do not exist on the basis of prior knowledge, the advantage of this approach is that it makes these assumptions explicit (and hence transparent).<a class="reference external" href="https://doi.org/10.1513/AnnalsATS.201808-564PS">[Lederer et al. 2018]</a></p></li>
</ul>
</li>
<li><p>They indicate when associations or independence should be expected.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
<li><p>They can help determine whether the effect of interest can be identified from available data, and help us clarify our study question<a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a> - and to identify problems in the study design<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
</section>
</section>
<section id="key-components">
<h2>Key components<a class="headerlink" href="#key-components" title="Link to this heading">#</a></h2>
<section id="confounders">
<h3>Confounders<a class="headerlink" href="#confounders" title="Link to this heading">#</a></h3>
<p><strong>Confounders</strong> are variables that <strong>cause BOTH the treatment/exposure and outcomes</strong>.</p>
<p><em>Informally, it occurs when there is an open backdoor path between the treatment/exposure and outcome, and you could say a confounder is a variable that - possibly together with other variables - can be used to block the backdoor path between the treatment and outcome.</em></p>
<p>We included <strong>measured and unmeasured</strong> confounders in our DAG.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p>
<p>We can use <strong>conditioning</strong> to control for confounding. This involves examining the relationship between A and Y within levels of the conditioning variable, using either: (a) sample restriction, (b) stratification, (c) adjustment, or (d) matching. If we don’t do this, we will get <strong>confounding bias</strong> (where a common cause of A and Y is not blocked). When you condition on something, you <strong>draw a box</strong> around it on the DAG.</p>
<p>Other terms like “adjusting” or “controlling” suggest a misleading interpretation of the model - although there does seem to be variability in terminology, with many sources using these terms. <a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a> Igelström et al. 2022 explain that ‘conditioning on a variable is analogous to controlling for, adjusting for or stratifying by it (although in practice, different methods of conditioning may have different effects on the results and their interpretation).’<a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p>
<p>Example: smoking causes yellow fingers and lung cancer</p>
<ul class="simple">
<li><p>If we don’t condition on it, we expect to see an association between yellow fingers and lung cancer (known as a <strong>marginal/unconditional</strong> association)</p></li>
<li><p>If we do condition on smoking, we expect to see no association between yellow fingers and lung cancers (i.e. they are “<strong>not associated conditional on</strong> smoking)<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
<div class="mermaid">
              flowchart TD;

    con:::outline;
    subgraph con[&quot;`**Conditional**`&quot;]
      cig2(&quot;Smoking&quot;):::black;
      lung2(&quot;Lung cancer&quot;):::white;
      yellow2(&quot;Yellow fingers&quot;):::white;
    end

    cig2 --&gt; lung2;
    cig2 --&gt; yellow2;

    uncon:::outline;
    subgraph uncon[&quot;`**Unconditional**`&quot;]
      cig(&quot;Smoking&quot;):::white;
      lung(&quot;Lung cancer&quot;):::white;
      yellow(&quot;Yellow fingers&quot;):::white;
    end

    cig --&gt; lung;
    cig --&gt; yellow;

    classDef white fill:#FFFFFF, stroke:#FFFFFF;
    classDef black fill:#FFFFFF, stroke:#000000;
    classDef outline fill:#FFFFFF;
        </div></section>
<section id="moderators">
<h3>Moderators<a class="headerlink" href="#moderators" title="Link to this heading">#</a></h3>
<p><strong>Moderators</strong> are variables that change the <strong>size or direction</strong> of the relationship between variables. These could also be referred to as <strong>effect modifiers</strong> or statistical interaction. <a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a></p>
<ul class="simple">
<li><p>If it impacts the <strong>size</strong> of the relationship, this is called <strong>non-qualitative effect modification</strong></p></li>
<li><p>If it impacts the <strong>direction</strong> of the relationship, this is called <strong>qualitative effect modification</strong> <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p></li>
<li><p>These can also be referred to as <strong>effect measure modification (EMM)</strong>. <a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p></li>
</ul>
<p>They usually help you judge the external validity of your study by identifying the limitations of when the relationship between variables holds. <a class="reference external" href="https://www.scribbr.co.uk/faqs/why-should-you-include-mediators-and-moderators-in-your-study/">[source]</a></p>
<p>There has been some disagreement on how these should be included/notation within DAGs. <a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a><a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/17700243/">[Weinberg 2007]</a></p>
<p>‘The presence and extent of EMM mathematically depends on the choice of an additive or multiplicative scale linking exposure and outcome; EMM may be present on either one of these scales or both’</p>
<p>‘If both the exposure and effect modifier are causes of the outcome, then EMM will always be present on at least one scale.’</p>
<p>‘<strong>Interaction</strong> denotes that the <strong>joint effect of two exposures is different from the sum of the individual effects of each exposure</strong>. Like EMM, the presence and extent of interaction depends on the choice of an additive or multiplicative scale and does not necessarily have a meaningful causal interpretation. ‘Interaction’ is sometimes used interchangeably with EMM, but it is helpful to think of these as different concepts:</p>
<ul class="simple">
<li><p>Interaction focuses on the <strong>joint causal effect</strong> of two exposures (eg, the combined effect of smoking and asbestos exposure on lung cancer)</p></li>
<li><p>EMM focuses on the effect of one exposure whose effect differs across levels of another variable (eg, the effect of asbestos exposure on lung cancer in smokers vs non-smokers); with EMM, the <strong>causal effect of the effect modifier itself is not of interest</strong>.’ <a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p></li>
</ul>
<div class="mermaid">
              flowchart LR;

    A(&quot;A (treatment/exposure)&quot;):::green;
    Y(&quot;Y (outcome)&quot;):::green;
    Empty[ ]:::empty;
    Mod(&quot;Moderator&quot;):::white;

    Mod --&gt; Empty;
    A --- Empty;
    Empty --&gt;|?| Y;

    classDef white fill:#FFFFFF, stroke:#FFFFFF;
    classDef black fill:#FFFFFF, stroke:#000000;
    classDef empty width:0px,height:0px;
    classDef green fill:#DDF2D1, stroke: #FFFFFF;
        </div><p><strong>Why do we care about modifiers/effect modification?</strong></p>
<p>(1) The average causal effect will differ between populations with different prevalence of the modifier - i.e. it depends on the distribution of individual causal effects in the population</p>
<ul class="simple">
<li><p>*<em>Example: If average causal effect of exposure is harmful in women and beneficial in mean, a study with an equal gender split would find null causal effect, and a study with majority women would find harmful causal effect.</em></p></li>
<li><p>Hence, ‘there is generally no such thing as “the average causal effect of treatment A on outcome Y (period)”, but “the average causal effect of treatment A on outcome Y in a population with a particular mix of causal effect modifiers.”’ The ability to extrapolate causal effects between populations is referred to as the <strong>transportability</strong> of causal inferences across populations.</p></li>
<li><p>However, there will often be unmeasured effect modifiers, and so ‘transportability of causal effects is an unverifiable assumption that relives heavily on subject-matter experts’.<a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p></li>
</ul>
<p>(2) Additive (but not multiplicative) effect modification can help identify groups who would most benefit from an intervention <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<p>(3) Identifying effect modification may help us to understand the biological, social, or other mechanisms leading to the outcome. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
</section>
<section id="mediators">
<h3>Mediators<a class="headerlink" href="#mediators" title="Link to this heading">#</a></h3>
<p><strong>Mediators</strong> are variables that lie in the causal path between the two other variables (e.g. between exposure and outcome), and they tell you how or why an effect takes place.<a class="reference external" href="https://www.scribbr.co.uk/faqs/why-should-you-include-mediators-and-moderators-in-your-study/">[source]</a></p>
<ul class="simple">
<li><p>A path that includes a mediator is often called an <strong>indirect effect</strong> or indirect causal path</p></li>
<li><p>In contrast, the arrow directly connecting the treatment and outcome represents the <strong>direct causal effect</strong> of the treatment on the outcome that is not due to changes in the mediator.<a class="reference external" href="https://doi.org/10.1513/AnnalsATS.201808-564PS">[Lederer et al. 2018]</a> This is also referred to as the <strong>controlled direct effect (CDE)</strong> <a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p></li>
<li><p>If you do not have a direct arrow between the treatment and outcome, and only via the mediator, this implies that this is the only way in which the treatment can cause the outcome, and that if you know the mediator is present, knowing whether or not the treatment was present should have no impact on the outcome.</p></li>
</ul>
<div class="mermaid">
              flowchart LR;

    treat(&quot;Treatment&quot;):::white;
    med(&quot;Mediator&quot;):::white;
    out(&quot;Outcome&quot;):::white;

    treat --&gt; med;
    med --&gt; out;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
        </div><p>You might <strong>condition</strong> on a mediator if you are interested in the <strong>direct effect of treatment on outcome that doesn’t pass through mediator</strong>. Example: In racial disparity studies, will condition on mediators like socioeconomic, education, location (often though <strong>matching</strong> on these characteristics),  to allow you to isolate the unique effect of race that is not explainable by those pathways. <a class="reference external" href="https://stats.stackexchange.com/questions/488048/dag-are-there-situations-where-adjusting-for-mediators-is-reasonable">[source]</a> This is referred to as <strong>mediation analysis</strong> - when you’re trying to ‘quantify how much of the total effect of A on Y is explained by a particular mediator (the indirect effect), and how much is not (the direct effect)’.</p>
<div class="mermaid">
              flowchart LR;

    race(&quot;Race&quot;):::white;
    outcome(&quot;Outcome&quot;):::white;
    ses(&quot;Socioeconomic status&quot;):::black;
    ed(&quot;Education&quot;):::black;
    loc(&quot;Location&quot;):::black;

    race --&gt;|?| outcome;
    race --&gt; ses; ses --&gt; outcome;
    race --&gt; ed; ed --&gt; outcome;
    race --&gt; loc; loc --&gt; outcome;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
        </div><section id="how-is-cde-estimated">
<h4>How is CDE estimated?<a class="headerlink" href="#how-is-cde-estimated" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>‘Assuming no interaction between exposure and mediator, and no confounding between mediator and outcome, the indirect effect can be obtained by subtracting the CDE from the total effect’</p></li>
<li><p>‘When interaction is present between exposure and mediator, the CDE will take on different values for different levels of the mediator, and the effect obtained by subtracting the CDE from the total effect no longer has a meaningful causal interpretation.’</p></li>
<li><p>‘To address this problem, alternative definitions of causal direct and indirect effects have been proposed, such that their sum adds up to the total effect even in the presence of interactions, generally by allowing one or more of these effects to include the interaction effect.’ These include:</p>
<ul>
<li><p>Controlled direct effect (CDE)</p></li>
<li><p>Natural direct effect or pure direct effect</p></li>
<li><p>Natural indirect effect or total indirect effect</p></li>
<li><p>Pure indirect effect</p></li>
<li><p>Total direct effect</p></li>
</ul>
</li>
<li><p>‘These effect estimands can be defined theoretically in counterfactual terms, but can only be estimated given additional assumptions that are difficult to verify and may lack applicability for estimating policy-relevant mediation quantities (eg, how much the effect of A on Y could be reduced by intervening on the mediator).’<a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p></li>
</ul>
</section>
<section id="over-adjustment-bias">
<h4>Over-adjustment bias<a class="headerlink" href="#over-adjustment-bias" title="Link to this heading">#</a></h4>
<p><a class="reference external" href="https://doi.org/10.1097/EDE.0b013e3181a819a1">Schisterman et al. 2009</a> defined <strong>over-adjustment bias</strong> as ‘control for an intermediate variable (or a descending proxy for an intermediate variable) on a causal path from exposure to outcome’ (i.e. controlling for a mediator).</p>
</section>
</section>
<section id="colliders">
<h3>Colliders<a class="headerlink" href="#colliders" title="Link to this heading">#</a></h3>
<p><strong>Colliders</strong> are descendents of two other variables - i.e. common effect - with two arrows from the parents pointing to (“colliding with”) the descendent node. Colliders naturally block back-door paths. <strong>Controlling for a collider will open the back-door path, thereby introducing confounding</strong>.<a class="reference external" href="https://doi.org/10.1513/AnnalsATS.201808-564PS">[Lederer et al. 2018]</a> This is referred to as <strong>collider bias</strong></p>
<p>Example: A genetic factor and an environmental factor causing cancer.</p>
<ul class="simple">
<li><p>Scenario #1: No conditioning - These are <strong>independent</strong> - i.e. genetic factor doesn’t have causal effect on environmental factor - and so we don’t expect to see an association between genetic and environment (unconditional/marginal association).</p></li>
<li><p>Scenario #2: Condition on cancer - If we condition on cancer - such as by just selecting people who have cancer - we will find an <strong>inverse association</strong> between genetics and environment (as if cancer wasn’t caused by one, it was by the other). This biased effect estimate is referred to as <strong>selection bias</strong>.</p></li>
<li><p>Scenario #3: Condition on surgery - We can <strong>induce</strong> selection bias by conditioning on the downstream consequence of a collider - e.g. if cancer is collider, and surgery is consequence of cancer, if we condition on surgery, we expect to see inverse association between genetic and environment conditional on surgery (just as we did for the collider cancer).<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
<div class="mermaid">
              flowchart TD;

    con_sur:::outline;
    subgraph con_sur[&quot;`**Condition on surgery**`&quot;]
      gene3(&quot;Genetic&lt;br&gt;factor&quot;):::white;
      env3(&quot;Environmental&lt;br&gt;factor&quot;):::white;
      cancer3(&quot;Cancer&quot;):::white;
      surgery3(&quot;Surgery&quot;):::black;
    end

    gene3 --&gt; cancer3;
    env3 --&gt; cancer3;
    cancer3 --&gt; surgery3;

    con_cancer:::outline;
    subgraph con_cancer[&quot;`**Condition on cancer**`&quot;]
      gene2(&quot;Genetic&lt;br&gt;factor&quot;):::white;
      env2(&quot;Environmental&lt;br&gt;factor&quot;):::white;
      cancer2(&quot;Cancer&quot;):::black;
      surgery2(&quot;Surgery&quot;):::white;
    end

    gene2 --&gt; cancer2;
    env2 --&gt; cancer2;
    cancer2 --&gt; surgery2;

    none:::outline;
    subgraph none[&quot;`**No conditioning**`&quot;]
      gene(&quot;Genetic&lt;br&gt;factor&quot;):::white;
      env(&quot;Environmental&lt;br&gt;factor&quot;):::white;
      cancer(&quot;Cancer&quot;):::white;
      surgery(&quot;Surgery&quot;):::white;
    end

    gene --&gt; cancer;
    env --&gt; cancer;
    cancer --&gt; surgery;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
    classDef outline fill:#FFFFFF;
        </div><p>Collider bias may also be present when neither the exposure nor the outcome is a direct cause of the collider variable. An example is <strong>M-bias</strong>. In this example…</p>
<ul class="simple">
<li><p>Focus: beta-blocker use and risk of ARDS</p></li>
<li><p>Might be tempted to adjust for crackles as you might think its a confounder… 1) heart failure leads to both chronic β-blocker therapy and crackles, and 2) pneumonia causes both ARDS and crackles</p></li>
<li><p>However, crackles is actually a collider on the <strong>back-door path</strong> of <strong>chronic β-blocker therapy</strong> ← heart failure → crackles ← pneumonia → <strong>ARDS</strong>. Adjusting for the presence of crackles opens this back-door path, introducing confounding. Ignoring the presence of crackles would be the right thing to do.<a class="reference external" href="https://doi.org/10.1513/AnnalsATS.201808-564PS">[Lederer et al. 2018]</a></p></li>
</ul>
<div class="mermaid">
              flowchart TD;

    beta(&quot;Beta blocker use&quot;):::white;
    ards(&quot;Acute respiratory distress syndrome (ARDS)&quot;):::white;
    hf(&quot;Heart failure&quot;):::white;
    pneu(&quot;Pneumonia&quot;):::white;
    crackles(&quot;Crackles&quot;):::black;

    hf --&gt; beta;
    hf --&gt; crackles;
    pneu --&gt; crackles;
    pneu --&gt; ards;
    beta --&gt;|?| ards;
  
    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
        </div><p>Another type of collider bias - specifically, a type of selection bias - is <strong>Berkson’s bias</strong>. This is when the selection of cases into the study depends on hospitalisation, and the treatment is another disease, or a cause of another disease, which also results in hospitalisation.<a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a></p>
</section>
<section id="selection-nodes">
<h3>Selection nodes<a class="headerlink" href="#selection-nodes" title="Link to this heading">#</a></h3>
<p><strong>Selection nodes</strong> - by definition - are <strong>always conditioned on</strong>. This is because they reflect a restriction for inclusion such as:</p>
<ul class="simple">
<li><p><strong>Loss to follow-up</strong> - e.g. if some people lost to follow-up (C1) and some remain to end (C0), our analysis is restricted to C0. This means that only individuals with certain values of C are included in the analysis, as we’re essentially conditioning on it.</p></li>
<li><p><strong>Inclusion/exclusion criteria for the study</strong> - e.g. if only include men, then gender –&gt; study enrollment</p></li>
</ul>
</section>
<section id="measurement-error-mis-measured-variables">
<h3>Measurement error (mis-measured variables)<a class="headerlink" href="#measurement-error-mis-measured-variables" title="Link to this heading">#</a></h3>
<p><strong>Measurement error</strong> is the degree to which we mismeasure a variable. If believe a variable is mismeasured, we have a node with a “*” that points from variable, with another representing measurement error.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a> There are two types:</p>
<ul class="simple">
<li><p><strong>Non-differential error</strong> - if error is not in exposure or outcome - this will bias the estimate of effect towards the null (so for small effects or studies with little power, it can make a true effect disappear)</p></li>
<li><p><strong>Differential error</strong> - if there is error in exposure and outcome - then, errors themselvse can be associated, opening a back-door path between exposure and outcome<a class="reference external" href="https://cran.r-project.org/web/packages/ggdag/vignettes/bias-structures.html">[source]</a> - i.e. it is when measurement error varies in size depending on another variable. <a class="reference external" href="https://doi.org/10.1136/jech-2022-219267">[Igelström et al. 2022]</a></p></li>
</ul>
<p>Example: <strong>Recall bias</strong>. Does taking multivitamins in childhood help protect against bladder cancer later in life?</p>
<ul class="simple">
<li><p>Bias in outcome depends only on how well diagnosis of bladder cancer represents actually having it</p></li>
<li><p>Bias in exposure depends on both (a) memory of vitamin uptake, and (b) bladder cancer, since they might have spent more time reflecting on what could have caused the illness</p></li>
<li><p>If there is no effect of vitamins on bladder cancer, this dependency will make it seem as if vitamins are a <strong>risk</strong> for bladder cancer. If it is, in fact, <strong>protective</strong>, recall bias can reduce or even reverse the association.</p></li>
</ul>
<div class="mermaid">
              flowchart TD;

    me_diag(&quot;&lt;b&gt;Measurement error&lt;/b&gt;&lt;br&gt;in diagnosis&quot;):::white;
    diag(&quot;Diagnosis of bladder cancer *&quot;):::white;
    cancer(&quot;Bladder cancer&quot;):::white;
    me_vit(&quot;&lt;b&gt;Measurement error&lt;/b&gt;&lt;br&gt;in vitamin uptake&quot;):::white;
    mem_vit(&quot;Memory of&lt;br&gt;vitamin uptake *&quot;):::white;
    vit(&quot;Childhood vitamin intake&quot;):::white;

    me_diag --&gt; diag;
    cancer --&gt; diag;
    cancer --&gt; me_vit;
    me_vit --&gt; mem_vit;
    vit --&gt; mem_vit;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
    classDef outline fill:#FFFFFF
    classDef green fill:#DDF2D1, stroke: #FFFFFF;
        </div></section>
</section>
<section id="how-do-you-know-what-to-include-in-your-dag">
<h2>How do you know what to include in your DAG?<a class="headerlink" href="#how-do-you-know-what-to-include-in-your-dag" title="Link to this heading">#</a></h2>
<section id="dag-completeness">
<h3>DAG completeness<a class="headerlink" href="#dag-completeness" title="Link to this heading">#</a></h3>
<p>A DAG is said to represent a complete causal structure between a treatment and outcome if:</p>
<ul class="simple">
<li><p><strong>Treatment and outcome</strong> are presented</p></li>
<li><p><strong>For any two nodes on the graph, all common causes</strong> of those two nodes are represented</p></li>
<li><p>All <strong>selection variables</strong> are represented (i.e. selection node) <a class="reference external" href="https://doi.org/10.1002/psp4.12894">[Rogers et al. 2022]</a></p></li>
</ul>
<p>What do we mean by including common causes? Illustrating with an example…</p>
<ul class="simple">
<li><p>In <strong>RCT</strong> where people were randomised to receive Aspirin, we <strong>don’t need to include other variables</strong> that can cause stroke (e.g. coronary heart disease (CHD)), as they didn’t cause why people got aspirin.</p></li>
<li><p>In an <strong>observational study</strong>, there will be other variables that would explain why people received aspirin (e.g. CHD), which we would need to include for it to be a causal DAG (i.e. <strong>aspirin AND stroke BOTH caused by CHD</strong>). <a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
<p>You don’t need variables that <strong>cause Y but not A</strong> (although might include if for example you want to compare to other studies that did adjust for that variable).</p>
<div class="mermaid">
              flowchart TD;

    ob:::outline;
    subgraph ob[&quot;`**Observational**`&quot;]
      asp2(&quot;Aspirin&quot;):::green;
      str2(&quot;Stroke&quot;):::green;
      chd2(&quot;Coronary heart disease (CHD)&quot;):::white;
    end

    asp2 --&gt; str2;
    chd2 --&gt; asp2;
    chd2 --&gt; str2;

    rct:::outline;
    subgraph rct[&quot;`**RCT**`&quot;]
      asp(&quot;Aspirin&quot;):::green;
      str(&quot;Stroke&quot;):::green;
    end

    asp --&gt; str;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
    classDef outline fill:#FFFFFF
    classDef green fill:#DDF2D1, stroke: #FFFFFF;
        </div></section>
<section id="how-do-you-know-when-to-include-mediators">
<h3>How do you know when to include mediators?<a class="headerlink" href="#how-do-you-know-when-to-include-mediators" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>If we are interested in the <strong>total effect of A on Y</strong>, we don’t need to specify the mechanisms through which A may affect Y (i.e. don’t need any m ediators between A and Y)</p></li>
<li><p>However, if we are interested in the <strong>direct effect of A on Y</strong> that doesn’t pass through the mediator, then we should include it. <a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p></li>
</ul>
</section>
<section id="when-should-you-draw-arrows">
<h3>When should you draw arrows?<a class="headerlink" href="#when-should-you-draw-arrows" title="Link to this heading">#</a></h3>
<p>The DAG is drawn based on <strong>expert knowledge</strong>, including arrows when you believe that something causes something else. If expert knowledge is <strong>insufficient</strong> for us to rule out a direct effect of E on D, then we should draw an arrow.</p>
<p>Arrows on causal graphs are <strong>not deterministic</strong> - i.e. doesn’t mean every person with exposure will see outcome - as some will never, and some without outcome will develop it. <a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p>
</section>
<section id="can-you-use-variable-selection-methods">
<h3>Can you use variable selection methods?<a class="headerlink" href="#can-you-use-variable-selection-methods" title="Link to this heading">#</a></h3>
<p>No - it is important that these are based on expert knowledge. For causal inference, it is <strong>NOT</strong> recommended to choose included variables/relationships based on:</p>
<ul class="simple">
<li><p>P value-based and model-based <strong>variable selection methods</strong> (including forward, backward, and stepwise selection) - since they ignore the causal structure underlying the hypothesis and treat confounders and colliders similarly</p></li>
<li><p>Use methods that <strong>rely on model</strong> fit or related constructs (e.g. R<sup>2</sup>, Akaike information criterion, and Bayesian information criterion) - since these rely heavily on the available data, in which causal relationships may or may not have been captured and may or may not be evident, and specification of model and arbitrary variables included will drive observed associations with outcome</p></li>
<li><p>Use selection of variables that, when included in a model, change the magnitude of the effect estimate of the exposure of interest, to identify confounders</p></li>
<li><p>Identify multiple ‘independent predictors’ through purposeful or automated variable selection</p></li>
</ul>
<p><strong>If the authors have hypotheses about each variable, then a separate model for each variable should be generated</strong> - or a prediction model could be developed, if prediction, rather than causal inference, is the goal of the analysis<a class="reference external" href="https://doi.org/10.1513/AnnalsATS.201808-564PS">[Lederer et al. 2018]</a></p>
</section>
</section>
<section id="how-do-you-create-a-dag">
<h2>How do you create a DAG?<a class="headerlink" href="#how-do-you-create-a-dag" title="Link to this heading">#</a></h2>
<p>First, start with your <strong>research question</strong>. This should be A (treatment/exposure) and Y (outcome), identificated by letters, “?” or colours.</p>
<p>Then add the key components as detailed above…</p>
<ul class="simple">
<li><p>Measured confounders (L)</p></li>
<li><p>Unmeasured confounders (U)</p></li>
<li><p>Selection nodes</p></li>
<li><p>Moderators</p></li>
<li><p>Mediators</p></li>
<li><p>Mismeasured variables</p></li>
</ul>
<p><strong>Everytime you add a new node</strong> to the DAG, you need to conside whether it has common causes with any other variables (its not just about common causes of A and Y). For example, if you believe measurement of Y is affected by whether person is on treatment, draw arrow from A to measurement error for Y.</p>
<p>There can often be <strong>more than one appropriate DAG</strong>, and alternate DAGs can make excellent sensitivity analyses.<a class="reference external" href="https://med.stanford.edu/content/dam/sm/s-spire/documents/WIP-DAGs_ATrickey_Final-2019-01-28.pdf">[source]</a> <a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p>
<div class="mermaid">
              flowchart LR;

    A(&quot;A (treatment/exposure)&quot;):::green;
    Y(&quot;Y (outcome)&quot;):::green;
    Empty[ ]:::empty;
    Mod(&quot;Moderator&quot;):::white;
    M(&quot;Mediator&quot;):::white;
    L(&quot;L (confounder)&quot;):::white;
    U(&quot;U (unmeasured confounder)&quot;):::white;
    C(&quot;C (selection node)&quot;):::black;
    Y*(&quot;Y* (mismeasured outcome)&quot;):::white;
    UY(&quot;U&lt;sub&gt;Y&lt;/sub&gt; (measurement error for Y)&quot;):::white;

    Mod --&gt; Empty;
    A --- Empty; Empty --&gt;|?| Y;
    A --&gt; M; M --&gt; Y;
    L --&gt; A; L --&gt; Y;
    U --&gt; L; U --&gt; Y;
    A --&gt; C;
    L --&gt; C;
    Y --&gt; Y*;
    UY --&gt; Y*;
    A --&gt; UY;

    classDef white fill:#FFFFFF, stroke:#FFFFFF;
    classDef black fill:#FFFFFF, stroke:#000000;
    classDef empty width:0px,height:0px;
    classDef green fill:#DDF2D1, stroke: #FFFFFF;
        </div></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./causal_concepts"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="design_counterfactuals.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Counterfactuals</p>
      </div>
    </a>
    <a class="right-next"
       href="design_dag_2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">DAGs #2 (advanced concepts)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-causal-diagrams">Introduction to causal diagrams</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-causal-diagrams">What are causal diagrams?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-conventions">Naming conventions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-create-causal-diagrams">Why do we create causal diagrams?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-components">Key components</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#confounders">Confounders</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#moderators">Moderators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mediators">Mediators</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#how-is-cde-estimated">How is CDE estimated?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#over-adjustment-bias">Over-adjustment bias</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colliders">Colliders</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selection-nodes">Selection nodes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement-error-mis-measured-variables">Measurement error (mis-measured variables)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-you-know-what-to-include-in-your-dag">How do you know what to include in your DAG?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dag-completeness">DAG completeness</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-you-know-when-to-include-mediators">How do you know when to include mediators?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-should-you-draw-arrows">When should you draw arrows?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#can-you-use-variable-selection-methods">Can you use variable selection methods?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-you-create-a-dag">How do you create a DAG?</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Amy Heather
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>