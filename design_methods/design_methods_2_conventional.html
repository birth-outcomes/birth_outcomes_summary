
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Methods #2: Conventional approaches &#8212; Birth Outcomes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=afe5de03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'design_methods/design_methods_2_conventional';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Methods #3: G-methods" href="design_methods_3_gmethods.html" />
    <link rel="prev" title="Methods #1: Introduction to methods to adjust for confounding" href="design_methods_1_intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Birth Outcomes</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Birth outcomes summary
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../background/background.html">Background</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../background/stages.html">Stages of pregnancy and birth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/interventions.html">Interventions during labour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/research_groups.html">Research groups</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../outcomes/outcomes.html">Identifying hypoxic ischaemic encephalopathy (HIE)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_background.html">Examples of identifying HIE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_summary.html">Summary of possible indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_cooling.html">Therapeutic hypothermia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_hie_diagnosis.html">Diagnostic codes for HIE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_blood.html">Umbilical cord blood gas analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_sentinel.html">Sentinel events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_resus.html">Resuscitation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_meconium.html">Meconium-stained amniotic fluid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_care.html">Transfer to neonatal care services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_cp.html">Cerebral palsy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_mri.html">Neuroimaging evidence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_enceph_symptoms.html">Symptoms of neonatal encephalopathy (NE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_apgar.html">Apgar scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_death.html">Death</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outcomes/neo_out_ctg.html">Abnormal CTG</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../causal_concepts/intro.html">Study design - causal concepts</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_intro_1_treatment_paradox.html">The treatment paradox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_intro_2_predict_vs_causal.html">Choosing between prediction and causal inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_intro_3_causal.html">Causal inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_counterfactuals.html">Counterfactuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_dag_1.html">Directed acyclic graphs (DAGs) #1 (basics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_dag_2.html">DAGs #2 (advanced concepts)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../causal_concepts/design_sem.html">Structural equation modelling</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">Study design - causal methods</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="design_causal_assumptions.html">Causal assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_causal_estimands.html">Causal estimands</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_target_trial.html">Target trial emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_observational.html">Observational study designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_methods_1_intro.html">Methods #1: Introduction to methods to adjust for confounding</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Methods #2: Conventional approaches</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_methods_3_gmethods.html">Methods #3: G-methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_methods_4_unobserved.html">Methods #4: Methods for unobserved confounding</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_methods_5_other.html">Methods #5: Other</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_examples.html">Examples of studies that account for the treatment paradox</a></li>
<li class="toctree-l2"><a class="reference internal" href="design_other.html">Other design considerations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../our_study/intro.html">Our study</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../our_study/design_plan.html">A rough plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../our_study/our_dag.html">HIE DAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../our_study/our_target_trial_protocol.html">HIE target trial protocol</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendices/intro.html">Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendices/neo_out_enceph_treatment_outcomes.html">Challenge 2: Outcomes for trials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/neo_out_chorio.html">More on chorioamnionitis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/fetal_risk_factors.html">Fetal risk factors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/cardiotocography.html">Cardiotocography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/parental_outcomes.html">Parental outcomes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/routine_data.html">Routinely collected data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/key_papers.html">Key Papers</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fdesign_methods/design_methods_2_conventional.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/design_methods/design_methods_2_conventional.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Methods #2: Conventional approaches</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conventional-approaches-for-causal-effect-estimation">Conventional approaches for causal effect estimation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#propensity-scores">Propensity scores</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stratification">Stratification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example">Simple example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mantel-haenszel-formula">Mantel-Haenszel Formula</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stratification-on-the-propensity-score">Stratification on the propensity score</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations-of-stratification">Limitations of stratification</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exclude-treated-individuals">Exclude treated individuals</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matching">Matching</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matching-methods">Matching methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations-of-matching">Limitations of matching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverse-probability-of-treatment-weighting-iptw-with-baseline-covariates">Inverse probability of treatment weighting (IPTW) with baseline covariates</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#strengths-and-limitations">Strengths and limitations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iptw-variants">IPTW variants</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#weight-stabilisation">Weight stabilisation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#propensity-score-trimming-and-truncation">Propensity score trimming and truncation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#augmented-inverse-propensity-weighting-aipw">Augmented inverse propensity weighting (AIPW)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#excluding-treated-individuals">Excluding treated individuals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multivariable-regression">Multivariable regression</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-methods">Other methods</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-treatment-as-the-outcome">Use treatment as the outcome</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-existence-of-fully-standardised-care-with-no-variation-in-treatment-or-variation-that-you-can-account-for">The existence of fully standardised care with no variation in treatment (or variation that you can account for)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#predictor-substition">Predictor substition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#incorporation-of-treatment-as-a-predictor-in-the-model">Incorporation of treatment as a predictor in the model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recalibration">Recalibration</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="methods-2-conventional-approaches">
<h1>Methods #2: Conventional approaches<a class="headerlink" href="#methods-2-conventional-approaches" title="Link to this heading">#</a></h1>
<div class="info admonition">
<p class="admonition-title">Executive summary</p>
<p>Conventional methods for causal effect estimation (not suitable for time-varying or unobserved confounding). Often using <strong>propensity scores</strong>, which are the probability of being in the treatment/exposure group, given your baseline characteristics.</p>
<p>Create pseudo-population to mimic randomised population using:</p>
<ul class="simple">
<li><p>(Principal) <strong>Stratification</strong> - seperate participants based on their values of the confounder</p></li>
<li><p><strong>Matching</strong> - create same distribution of confounders in treated and untreated groups</p></li>
<li><p><strong>Inverse probability of treatment weighting (IPTW)</strong> - weight each individual by the inverse of their probability of receiving their actual treatment, resulting in equal distribution of confounders in the treated and untreated groups</p></li>
</ul>
<p>Or:</p>
<ul class="simple">
<li><p><strong>Multivariable regression</strong> - inclusion of confounders as covariates in the model</p></li>
</ul>
</div>
<section id="conventional-approaches-for-causal-effect-estimation">
<h2>Conventional approaches for causal effect estimation<a class="headerlink" href="#conventional-approaches-for-causal-effect-estimation" title="Link to this heading">#</a></h2>
<p>The most common methods typically focus on conditioning on some set of common causes of the exposure and outcome.</p>
<p>In RCTs, you are controlling for <strong>intercurrent events</strong> (ICEs), which are defined ‘a post-randomization event that “affect either interpretation or existence of the measurements associated with clinical questions of interest.”’. Examples include compliance to an assigned treatment, death before follow-up, treatment switching, etc.<a class="reference external" href="https://doi.org/10.1002/sim.9439">[Lipkovich et al. 2022]</a></p>
<p>Although these are very common - ‘described in a zillion publications’ - they only work in simpler settings, and cannot handle causal inference with time-varying treatments (such as is the case for complex longitudinal data).<a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<p>These approaches are:</p>
<ul class="simple">
<li><p>Stratification</p></li>
<li><p>Matching</p></li>
<li><p>Inverse probability of treatment weighting</p></li>
<li><p>Multivariable regression / covariate adjustment</p></li>
</ul>
<p><strong>Propensity score matching</strong> is recommended over stratification or covariate adjustment (multivariable regression) as it eliminates a greater proportion of systemic differences in baseline characteristics between treated and untreated. <a class="reference external" href="https://doi.org/10.1136/bmjopen-2021-058977">[Wijn et al. 2022]</a></p>
<p><strong>Inverse probability weighting</strong> can be used for baseline imbalances or time-varying confounding - so is expanded on in the G-methods page.</p>
<p>However, I first introduce <strong>propensity scores</strong>, as these are used within variants of several methods.</p>
</section>
<section id="propensity-scores">
<h2>Propensity scores<a class="headerlink" href="#propensity-scores" title="Link to this heading">#</a></h2>
<p>A <strong>propensity score</strong> is the ‘probability of treatment assignment conditional on observed baseline characteristics’. It was defined by was Rosenbaum and Rubin (1983). It is a ‘balancing score: conditional on the propensity score, the distribution of measured baseline covariates is similar between treated and untreated subjects’. <a class="reference external" href="https://doi.org/10.1080%2F00273171.2011.568786">[Austin 2011]</a></p>
<p>Propensity scores are often estimated using a <strong>logistic regression model</strong> with:</p>
<ul class="simple">
<li><p>Outcome = Treatment <em>(e.g. insulin therapy)</em></p></li>
<li><p>Predictors = Observed baseline characteristics <em>(e.g. blood pressure, BMI, lipid profile)</em></p></li>
<li><p>Propensity score = <strong>Predicted probability of treatment</strong> from the fitted model <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p></li>
</ul>
<p>Image from Shaw Talebi on <a class="reference external" href="https://towardsdatascience.com/propensity-score-5c29c480130c">Towards Data Science</a>:</p>
<p><img alt="Propensity score" src="../_images/propensity_score_tds.png" /></p>
<p>Use of a propensity score enables incorporation of ‘a larger number of background covariates because it uses the covariates to estimate a single number’. <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p>
<p>Four different propensity scores methods are used for removing the effects of confounding:</p>
<ul class="simple">
<li><p><strong>Stratification</strong> on the propensity score</p></li>
<li><p>Propensity score <strong>matching</strong></p></li>
<li><p><strong>Inverse probability of treatment weighting (IPTW)</strong> using the propensity score</p></li>
<li><p><strong>Covariate adjustment</strong> using the propensity score <a class="reference external" href="https://doi.org/10.1080%2F00273171.2011.568786">[Austin 2011]</a></p></li>
</ul>
<p>Assumptions of propensity score analysis/methods:</p>
<ul class="simple">
<li><p>All covariates related to outcome and treatment (exposure) are measured and included</p></li>
<li><p>SUTVA - treatment effect for one individual is not affected by the treatment status of another</p></li>
<li><p>The assumptions of logistic regression <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p></li>
</ul>
</section>
<section id="stratification">
<h2>Stratification<a class="headerlink" href="#stratification" title="Link to this heading">#</a></h2>
<p>Stratification or <strong>principal stratification</strong> is the <strong>simplest</strong> method to control confounding.<a class="reference external" href="https://doi.org/10.1159/000319590">[Tripepi et al. 2010]</a> It is represented by drawing a box on the DAG.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p>
<p>It was proposed by Frangakis and Rubin 2002.<a class="reference external" href="https://doi.org/10.1111/j.0006-341X.2002.00021.x">[source]</a> It has gained popularity since the ICH E9 addendum on statistical principles for clinical trials, which listed it as a valid approach to ICEs.<a class="reference external" href="https://cran.r-project.org/web/packages/PStrata/vignettes/PStrata_JSS.pdf">[source]</a> The use of stratification to adjust for confounding is so common that some investigators consider the terms ‘stratification’ and ‘adjustment’ synonymous. Whilst it can be used to adjust for confounding - but it can also be used to <strong>identify effect modification</strong>.<a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<p>Principal stratification involves partitioning participants into <strong>principal strata</strong> - i.e. particular values of a variable. ‘Stratification necessarily results in multiple stratum-specific effect measures (one per stratum defined by the variables L). Each of them quantifies the average causal effect in a nonoverlapping subset of the population but, in general, none of them quantifies the average causal effect in the entire population.’ Instead, they are <strong>conditional effect measures</strong>. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<p>‘Often, one of the principal strata is the focus of inference, but sometimes it is of interest to combine principal effects across several (or all) principal strata while accounting for a confounding effect of a post-randomization variable.’<a class="reference external" href="https://doi.org/10.1002/sim.9439">[Lipkovich et al. 2022]</a> Hence, stratification involves either:</p>
<ul class="simple">
<li><p><strong>Restricting analysis to subset</strong> of study population with particular value of confounder.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a> This type of stratification is referred to as <strong>restriction</strong>. When positivity fails for some strata of the population (i.e. impossible to get a certain exposure), restriction is used to limit causal inference to the strata where it does hold. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p></li>
<li><p><strong>Performing analysis in each stratum</strong> of confounder.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a> For causal inference, stratification is simply applies restriction to several mutually exclusive subsets of the population, with exchangeability within each subset. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p></li>
</ul>
<section id="simple-example">
<h3>Simple example<a class="headerlink" href="#simple-example" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Exposure: Birth order</p></li>
<li><p>Outcome: Down syndrome</p></li>
<li><p>Potential confounder: Maternal age</p></li>
</ul>
<div class="mermaid">
              flowchart LR;

    order(&quot;Birth order&quot;):::white;
    down(&quot;Down syndrome&quot;):::white;
    age(&quot;Maternal age&quot;):::black;

    order --&gt;|?| down;
    age --&gt; order;
    age --&gt; down;

    classDef white fill:#FFFFFF, stroke:#FFFFFF
    classDef black fill:#FFFFFF, stroke:#000000
        </div><p>See figure:</p>
<ul class="simple">
<li><p>(a) Association of down syndrome with birth order and age groups seperately</p></li>
<li><p>(b) Down syndrome cases stratified by birth order and maternal age</p></li>
</ul>
<p>Can observe that crude association between birth order and Down syndrome was just due to maternal age (as in each age category, birth order did not affect down syndrome frequency, but in each birth order category, age did). <a class="reference external" href="https://doi.org/10.1159/000319590">[Tripepi et al. 2010]</a></p>
<p><img alt="Tripepi et al. 2010 Figure 1" src="../_images/tripepi_2010_fig1.jpg" /></p>
</section>
<section id="mantel-haenszel-formula">
<h3>Mantel-Haenszel Formula<a class="headerlink" href="#mantel-haenszel-formula" title="Link to this heading">#</a></h3>
<p>The <strong>Mantel-Haenszel formula</strong> can be used to provide a pooled odds ratio across different strata. There are alternative methods (e.g. Woolf and inverse variance) but the Mantel-Haenszel method is generally the most robust.<a class="reference external" href="https://www.statsdirect.co.uk/help/meta_analysis/mh.htm">[source]</a></p>
<p>Key steps:</p>
<ol class="arabic simple">
<li><p>Calculate crude relative risks (RR) or odds ratio (OR) (i.e. <strong>without stratifying</strong>)</p></li>
<li><p>Stratify by confounding variable and calculate <strong>stratum-specific</strong> RR or OR</p></li>
<li><p>Assess whether effect estimates are roughly homogenous across strata and do not differ from that in the whole group</p>
<ul class="simple">
<li><p>If they are <strong>homogeneous</strong>, this means there is <strong>no confounding</strong>, and you can calculate the overall adjusted RR or OR by the <strong>Mantel-Haenszel formula</strong>. The pooling estimate provides an <strong>average</strong> of the stratum-specific RRs or ORs with <strong>weights proportional to the number of individuals</strong> in each stratum.</p></li>
<li><p>If they are <strong>heterogeneous</strong> and we are interested in effect modification, stratum-specific effect estimates should be reported separately. <a class="reference external" href="https://doi.org/10.1159/000319590">[Tripepi et al. 2010]</a></p></li>
</ul>
</li>
</ol>
</section>
<section id="stratification-on-the-propensity-score">
<h3>Stratification on the propensity score<a class="headerlink" href="#stratification-on-the-propensity-score" title="Link to this heading">#</a></h3>
<p>You can stratify subjects based on their propensity scores. ‘The literature showed that five strata are adequate to reduce at least 90% of the bias associated with a confounding variable. With a large sample size, we can use between 10 or 20 strata.’ <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p>
</section>
<section id="limitations-of-stratification">
<h3>Limitations of stratification<a class="headerlink" href="#limitations-of-stratification" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Computes <strong>conditional</strong> effect measures (not average effect measures)</p></li>
<li><p>Requires computation of effect measures in subsets of population defined by combining <em>all</em> variables required for conditional exchangeability<a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<ul>
<li><p>This can be laborious and demands a large sample <strong>size</strong> when there is more than one confounder.<a class="reference external" href="https://doi.org/10.1159/000319590">[Tripepi et al. 2010]</a> It is therefore ‘prone to sparse-data problem (it occurs when there are few or no study participants at some combinations of the outcome, exposure, and covariates) and unstable estimates’, and as such, ‘is rarely used in practice’. <a class="reference external" href="https://journalaim.com/Article/1060">[Gharibzadeh et al. 2016]</a></p></li>
<li><p>This is even if we’re <strong>not interested</strong> in such effect modification. Solution: Stratification by something of interest (i.e. effect modifier) followed by IP weighting or standardisation (to adjust for confounding) allows you to deal with exchangeability (confounders) and effect modification (modifiers)</p></li>
</ul>
</li>
<li><p><strong>Noncollapsibility</strong> of certain effect measures like the odds ratio <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a> - i.e. ‘the crude OR from the marginal table cannot be expressed as the weighted average of the stratum-specific ORs even in the absence of confounding’ - as ‘the magnitude of the OR is different when comparing the aggregate analysis to the subgroup analysis’ - but both estimates are still valid. Other effect measures are <strong>collapsible</strong> e.g. stratified risk ratios <a class="reference external" href="https://doi.org/10.1016/j.amjcard.2012.09.002">[Pang et al. 2013]</a></p></li>
<li><p>Requires <strong>continuous</strong> confounders to be <strong>constrained</strong> to a limited number of categories, which could generate <strong>residual confounding</strong> <a class="reference external" href="https://doi.org/10.1159/000319590">[Tripepi et al. 2010]</a></p></li>
</ul>
</section>
<section id="exclude-treated-individuals">
<h3>Exclude treated individuals<a class="headerlink" href="#exclude-treated-individuals" title="Link to this heading">#</a></h3>
<p>A variant on stratification is an anlysis which simply exclude treated individuals. This is proposed in the context of a treatment paradox, where you’re interested in the direct causal effect of an exposure on the outcome that is not mediated via decision to treat, which is based on presence of the exposure.</p>
<div class="mermaid">
              flowchart LR;

    %% Define the nodes and subgraphs
    exp(&quot;Exposure&quot;):::white;
    treat(&quot;Treatment&quot;):::white;
    out(&quot;Outcome&quot;):::white;

    %% Produce the figure
    exp --&gt; treat;
    treat --&gt; out;
    exp --&gt; out;
  
    classDef white fill:#FFFFFF, stroke:#FFFFFF;
    classDef black fill:#FFFFFF, stroke:#000000;
        </div><p>Limitations:</p>
<ul class="simple">
<li><p>Will ‘decrease the effective <strong>sample size</strong>’ (which could cause you to not see an effect if you don’t have the power). This, for example, leads to ‘the precision of estimates of both the observed:expected ratio and c-index (area under the ROC curve) decreased due to the reduction in effective sample size’.</p></li>
<li><p>Results in loss of information about <strong>high risk individuals</strong>, if treatment allocation was dependent on risk (and so very few were untreated), with the discriminative ability of the model worsening with the exclusion of high-risk individuals and consequently narrower case mix.</p></li>
<li><p>‘In the presence of a strong <strong>unmeasured predictor of the outcome associated with treatment use</strong>, exclusion of treated individuals resulted in an underestimation of the performance of the model.’</p></li>
</ul>
<p><a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
</section>
</section>
<section id="matching">
<h2>Matching<a class="headerlink" href="#matching" title="Link to this heading">#</a></h2>
<p><strong>Matching</strong> involves selecting a sample where exposed and unexposed groups have the same distribution of confounders.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a> We often start with the group with fewer individuals, and then use the other group to find matches. It does not have to be <strong>one-to-one (matching pairs)</strong> - it can be <strong>one-to-many (matching sets)</strong>. Matching is often based on a combination of confounders. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<p>Matching can’t be represented in DAG, because <strong>non-faithfulness</strong> - the association to a backdoor path is exactly cancelled by the matched subset.<a class="reference external" href="https://learning.edx.org/course/course-v1:HarvardX+PH559x+2T2020/home">[HarvardX PH559x]</a></p>
<p>We make an assumption of conditional exchangeability given L (the confounder), meaning that matching results in ‘(unconditional) <strong>exchangeability</strong> of the treated and untreated in the matched population’, and so we <strong>directly compare</strong> their outcomes. Matching ensures <strong>positivity</strong> since strata with only treated or untreated individuals are excluded. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<section id="matching-methods">
<h3>Matching methods<a class="headerlink" href="#matching-methods" title="Link to this heading">#</a></h3>
<p>Above describes <strong>individual matching</strong>, but you can also use <strong>frequency matching</strong>. For example, randomly selected individuals but ensuring 70% have L=1 (certain value of confounder), and then repeating for the other population. <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p>
<p>There are a few approaches to matching, which include:</p>
<ul class="simple">
<li><p><strong>Propensity score matching</strong> - matched based on propensity scores</p>
<ul>
<li><p>This is commonly one-to-one matching based on similar values of the propensity score, which can be done with or without replacement, but <strong>with replacement can decrease</strong> bias and is helpful where the numbers of controls are limited. <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p></li>
<li><p>Selecting the propensity score ‘close’ to the treated subject is done using either <strong>nearest neighbour matching</strong> or nearest neighbour matching within a specific caliper distance.</p></li>
<li><p>You can choose between <strong>greed matching</strong> or <strong>optimal matching</strong></p></li>
<li><p>Outcomes…</p>
<ul>
<li><p>‘If the outcome is continuous (e.g., a depression scale), the effect of treatment can be estimated as the difference between the mean outcome for treated subjects and the mean outcome for untreated subjects in the matched sample’</p></li>
<li><p>‘If the outcome is dichotomous (self-report of the presence or absence of depression), the effect of treatment can be estimated as the difference between the proportion of subjects experiencing the event in each of the two groups (treated vs. untreated) in the matched sample. With binary outcomes, the effect of treatment can also be described using the relative risk or the NNT.’</p></li>
<li><p>‘Once the effect of treatment has been estimated in the propensity score matched sample, the variance of the estimated treatment effect and its statistical significance can be estimated.’ <a class="reference external" href="https://doi.org/10.1080%2F00273171.2011.568786">[Austin 2011]</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Matched difference-in-differences</strong> - perform matching then compute difference-in-differences - this controls for unobserved, time-invariant characteristics between the groups</p></li>
<li><p><strong>Synthetic control method</strong> - weight one group in a manner to it closely resembles the other group
Above, we are describing the <strong>synthetic control method</strong>. <a class="reference external" href="https://dimewiki.worldbank.org/Matching">[source]</a></p></li>
</ul>
</section>
<section id="limitations-of-matching">
<h3>Limitations of matching<a class="headerlink" href="#limitations-of-matching" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Requires extensive datasets to properly match, with detailed information on baseline characteristics, but this is not always available</p></li>
<li><p>Assumes there are no unobserved characteristics between the matched groups. Possible solution: Matched difference-in-differences. <a class="reference external" href="https://dimewiki.worldbank.org/Matching">[source]</a></p></li>
<li><p>Computes <strong>conditional</strong> effect measures (not average effect measures) - i.e. only for certain subset of population <a class="reference external" href="https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/">[Hernán and Robins 2024]</a></p></li>
</ul>
</section>
</section>
<section id="inverse-probability-of-treatment-weighting-iptw-with-baseline-covariates">
<h2>Inverse probability of treatment weighting (IPTW) with baseline covariates<a class="headerlink" href="#inverse-probability-of-treatment-weighting-iptw-with-baseline-covariates" title="Link to this heading">#</a></h2>
<p>Names:</p>
<ul class="simple">
<li><p><strong>Inverse probability weighting (IPW)</strong></p></li>
<li><p><strong>Inverse probability of treatment weighting (IPTW)</strong></p></li>
<li><p><strong>Propensity score weighting</strong></p></li>
</ul>
<p>IPTW is one of the various propensity score methods. Below describes IPTW to account for confounders at baseline, but it can be used to:</p>
<ul class="simple">
<li><p>Estimate parameters of a marginal structure model and adjust for confounding measured over time (see page on G-methods).</p></li>
<li><p>Account for informative censoring (pateitsn censored when lost to follow-up or reach study end without encountering event) - calculating <strong>inverse probability of censoring weights</strong> or each time point as the inverse probability of remaining in the study up to the current time point, given the previous exposure, and patient characteristics related to censoring <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p></li>
</ul>
<p>IPTW involves using the propensity scores to balance the baseline characteristics in the treated and untreated (or ‘exposed and unexposed’) groups. This is done by <strong>weighting each individual by the inverse probability of receiving their actual treatment</strong>. <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Actual group</p></th>
<th class="head"><p>Estimated probability of being in this group</p></th>
<th class="head"><p>Inverse</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Exposed / Treated</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">propensity_score</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1/propensity_score</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Unexposed / Untreated</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1-propensity_score</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1/(1-propensity_score)</span></code></p></td>
</tr>
</tbody>
</table>
<p>This means that larger weights go to:</p>
<ul class="simple">
<li><p>Exposed individuals with a lower probability of exposure</p></li>
<li><p>Unexposed individuals with a higher probability of exposure</p></li>
</ul>
<p>Conceptually, IPTW can be considered mathematically equivalent to standardisation.</p>
<p>As IPTW aims to balance patient characteristics in the exposed and unexposed groups, it is considered good practice to assess the <strong>standardized differences</strong> between groups for all baseline characteristics both before and after weighting. The advantage of checking standardized mean differences is that it allows for comparisons of balance across variables measured in different units. As a rule of thumb, a standardized difference of &lt;10% may be considered a negligible imbalance between groups. If the standardized differences remain too large after weighting, the propensity model should be revisited (e.g. by including interaction terms, transformations, splines). <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Study on receiving extended-hours haemodialysis (EHD) treatment v.s. conventional HD (CHD)</p></li>
<li><p>Want to balance distribution of diabetes - at baseline, <strong>higher % diabetes patients in CHD group</strong> than in EHD group</p></li>
<li><p>Patients with diabetes have 25% probability of receiving EHD = propensity score of 0.25</p></li>
<li><p>To balance distribution, weight-up patients in EHD group by inverse of propensity score, which is 1/0.25=4, so conceptually each <strong>EHD diabetes patient represents four patients</strong>, creating a “pseudo-population”</p></li>
<li><p>Similarly, CHD diabetes patients weighted by 1/(1-0.25)=1.33.</p></li>
<li><p><strong>Diabetes now equally distributed</strong> across the EHD and CHD groups</p></li>
<li><p>These weights can then be incorporated into an outcome model to get an estimate of the <strong>average treatment effect</strong> adjusted for confounders</p></li>
</ul>
<p>‘As the weighting creates a pseudopopulation containing ‘replications’ of individuals, the sample size is artificially inflated and correlation is induced within each individual. This lack of independence needs to be accounted for in order to correctly estimate the variance and confidence intervals in the effect estimates, which can be achieved by using either a robust ‘sandwich’ variance estimator or bootstrap-based methods.’ <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Diabetes + Group</p></th>
<th class="head"><p>Estimated probability<br>of EHD (given<br>diabetes status)</p></th>
<th class="head"><p>Estimated probability<br>of actual treatment<br>received</p></th>
<th class="head"><p>Inverse</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Diabetes + CHD</p></td>
<td><p>0.25</p></td>
<td><p>0.75</p></td>
<td><p>1/0.75 = 1.33</p></td>
</tr>
<tr class="row-odd"><td><p>No diabetes + CHD</p></td>
<td><p>0.75</p></td>
<td><p>0.25</p></td>
<td><p>1/0.25 = 4</p></td>
</tr>
<tr class="row-even"><td><p>Diabetes + EHD</p></td>
<td><p>0.25</p></td>
<td><p>0.25</p></td>
<td><p>1/0.25 = 4</p></td>
</tr>
<tr class="row-odd"><td><p>No diabetes + EHD</p></td>
<td><p>0.75</p></td>
<td><p>0.75</p></td>
<td><p>1/0.75 = 1.33</p></td>
</tr>
</tbody>
</table>
<p>Image from <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">Chesnaye et al. 2022</a>:</p>
<p><img alt="Chesnaye et al. 2022 propensity score diagram" src="../_images/chesnaye_2022_iptw.jpg" /></p>
</section>
<section id="strengths-and-limitations">
<h3>Strengths and limitations<a class="headerlink" href="#strengths-and-limitations" title="Link to this heading">#</a></h3>
<p>Strengths:</p>
<ul class="simple">
<li><p>(As for all propensity score-based methods) able to summarise all characteristics in a single covariate</p></li>
<li><p>Retains more individuals than propensity score matching</p></li>
<li><p>Can be used for categorical or continuous exposures (whilst matching generally compares a single treatment group with a control group)</p></li>
<li><p>Estimates hazard ratios with less bias than propensity score stratification or adjustment using the propensity score</p></li>
<li><p>Can be used in marginal structural models to correct for time-dependent confounders</p></li>
</ul>
<p>Limitations:</p>
<ul class="simple">
<li><p>Simulation studies have shown IPTW can be no better than multivariable regression</p></li>
<li><p>IPTW cautioned against for sample sizes under 150 due to underestimation of the variance (i.e. standard error, confidence interval and P-values) of effect estimates</p></li>
<li><p>‘Sensitive to misspecifications of the propensity score model, as omission of interaction effects or misspecification of functional forms of included covariates may induce imbalanced groups, biasing the effect estimate’ <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p></li>
<li><p>‘Propensity values near 0 and 1 yield extreme weights (after taking the inverse)’<a class="reference external" href="https://www2.stat.duke.edu/~fl35/teaching/640/Chap3.4_observational_weighting.pdf">[source]</a> - i.e. not recommended when propensities are small (close to 0) as weights can be unstable</p></li>
<li><p>ATE may not always be the sensible estimand <a class="reference external" href="https://www2.stat.duke.edu/~fl35/teaching/640/Chap3.4_observational_weighting.pdf">[source]</a></p></li>
</ul>
</section>
<section id="assumptions">
<h3>Assumptions<a class="headerlink" href="#assumptions" title="Link to this heading">#</a></h3>
<p>‘Treatment effects obtained using IPTW may be interpreted as causal under the following assumptions:</p>
<ul class="simple">
<li><p>Exchangeability</p></li>
<li><p>No misspecification of the propensity score model</p></li>
<li><p>Positivity</p></li>
<li><p>Consistency’ <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p></li>
</ul>
</section>
<section id="iptw-variants">
<h3>IPTW variants<a class="headerlink" href="#iptw-variants" title="Link to this heading">#</a></h3>
<p>One of the limitations described above is that propensity values near 0 and 1 yield <strong>extreme weights</strong>. This can ‘inflate the variance and confident intervals of the effect estimate. This may occur when the exposure is rare in a small subset of individuals, which subsequently receives very large weights, and thus have a disproportionate influence on the analysis.’ It’s worth considering <strong>why</strong> these individuals have such a low probability of being treatment but actually receive the treatment, or vice versa - they may be <strong>outliers</strong>. For example, ‘patients with a 100% probbaility of receiving a particular treatment would not be eligible to be randomised to both treatments’. There are variants to IPTW that attempt to address some of its limitations. <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p>
<section id="weight-stabilisation">
<h4>Weight stabilisation<a class="headerlink" href="#weight-stabilisation" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Replace ‘numerator (which is 1 in the unstabilized weights) with the <strong>crude probability of exposure</strong> (i.e. given by the propensity score model without covariates).’</p></li>
<li><p>‘In case of a binary exposure, the numerator is simply the proportion of patients who were exposed. Stablised weights can therefore be calculated as:’</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">exposed</span> <span class="pre">/</span> <span class="pre">propensity_score</span></code>, instead of <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">/</span> <span class="pre">propensity_score</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unexposed</span> <span class="pre">/</span> <span class="pre">(1-propensity</span> <span class="pre">score)</span></code>, instead of <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">/</span> <span class="pre">(1-propensity</span> <span class="pre">score)</span></code></p></li>
</ul>
</li>
<li><p>‘<strong>Stabilized weights should be preferred</strong> over unstabilized weights, as they tend to reduce the variance of the effect estimate’ <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p></li>
</ul>
<p>In other weights, weight stabilisation invovles multiplying the unstabilised weight by the probability of the observed exposure without conditioning on the confounders, and so it the stablised weight is the ‘ratio of the unconditional probability (the numerator) to the conditional probability (the denominator)’.<a class="reference external" href="https://doi.org/10.2215/CJN.00650117">[Xie et al. 2017]</a></p>
</section>
<section id="propensity-score-trimming-and-truncation">
<h4>Propensity score trimming and truncation<a class="headerlink" href="#propensity-score-trimming-and-truncation" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Symmetric trimming</strong> - exclude patients with a score outside [a, 1-a], with often a=0.1, so [0.1, 0.9] <a class="reference external" href="https://www2.stat.duke.edu/~fl35/teaching/640/Chap3.4_observational_weighting.pdf">[source]</a> - typically 1st and 99th percentiles, but lower thresholds can reduce variance <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p></li>
<li><p><strong>Asymmetric trimming</strong> - exclude patients with a score outside the common range formed by the treated and control patients, and below the q quantile of treated and above the 1-q quantile of control</p></li>
<li><p><strong>Propensity score truncation</strong> - set patients with a score below a to a, and above 1-a to 1-a  <a class="reference external" href="https://www2.stat.duke.edu/~fl35/teaching/640/Chap3.4_observational_weighting.pdf">[source]</a></p></li>
</ul>
<p>‘Truncating weights change the population of inference and thus this reduction in variance comes at the cost of increasing bias’. <a class="reference external" href="https://doi.org/10.1093%2Fckj%2Fsfab158">[Chesnaye et al. 2022]</a></p>
</section>
<section id="augmented-inverse-propensity-weighting-aipw">
<h4>Augmented inverse propensity weighting (AIPW)<a class="headerlink" href="#augmented-inverse-propensity-weighting-aipw" title="Link to this heading">#</a></h4>
<p>Augmented inverse propensity weighting (AIPW) involves:</p>
<ol class="arabic simple">
<li><p>Fitting a <strong>propensity score</strong> model (i.e. estimated probability of treatment assignment conditional on baseline characteristics)</p></li>
<li><p>Fit <strong>two seperate models</strong> that estimate the outcome - one under treatment and one under control</p></li>
<li><p><strong>Weight</strong> each outcome by the propensity scores</p></li>
</ol>
<p>This improves on IPW to combine information about the probability of treatment and predictive information about the outcome variable. It is a <strong>doubly robust</strong> estimator / has the property of double robustnesss. This means ‘that it is consistent (i.e., it converges in probability to the true value of the parameter) for the ATE if either the propensity score model or the outcome model is correctly specified’.</p>
<p>AIPW is more flexible as it doesn’t require the <strong>same set of covariates</strong> to be used for the propensity score model and model estimaing treatment-outcome relationship. <a class="reference external" href="https://doi.org/10.1177%2F0272989X211027181">[Kurz 2022]</a></p>
</section>
<section id="excluding-treated-individuals">
<h4>Excluding treated individuals<a class="headerlink" href="#excluding-treated-individuals" title="Link to this heading">#</a></h4>
<p>Pajouheshnia et al. 2017 propose to exclude treated individuals after IPTW - i.e. stratifying the sample but focussing only on untreated - so that the resulting validation set resembles the untreated target population.
<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a> This is proposed in the context of the treatment paradox, with the intention of finding the direct effect of the exposure on outcome not mediated by treatment.</p>
<p>In their simulation study, Pajouheshnia et al. 2017 find that <strong>IPW alone did not improve calibration</strong> (compared to when we did nothing to account for the treatment paradox), but IPW followed by the <strong>exclusion of treated individuals</strong> provided correct estimates for calibration. IPW alone or followed by the exclusion of treated individuals improved estimates of the c-index in all scenarios where the assumptions of positivity and no unobserved confounding were met. In scenario 4, <strong>where treatment allocation was determined by a strict risk-threshold and thus the assumption of positivity was violated, IPW was ineffective, and resulted in the worst estimates of discrimination across all methods</strong>. In addition, the extreme weights calculated in scenario 4 led to very large standard errors. In scenarios 13–15, the presence of an unobserved confounder led to the failure of IPW to provide correct estimates of the c-index. Weight truncation at the 98% percentile increased precision, but was less effective in correcting of the c-index for the effects of treatment.</p>
<p>‘Although the use of IPW prior to the exclusion of treated individuals is a promising solution in data where treatments are non-randomly allocated, it <strong>should not be used when there are severe violations of the underlying assumptions, e.g. in the presence of non-positivity (where some individuals had no chance of receiving treatment), or when there is an unobserved confounder, strongly associated with both the outcome and treatment use.</strong> There is thus a need to explore alternative methods to IPW to account for the effects of treatment use when validating a prognostic model in settings with non-random treatment use.’ <a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
</section>
</section>
</section>
<section id="multivariable-regression">
<h2>Multivariable regression<a class="headerlink" href="#multivariable-regression" title="Link to this heading">#</a></h2>
<p>In <strong>multivariable regression</strong>, the confounders are <strong>included as covariates</strong>. <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p>
<p>This can be through including individual covariaties, or by just including the estimated <strong>propensity score as a covariate</strong> in the regression model. This can be attractive as it allows the incorporation of many covariates. However, it should be used with caution, as ‘bias may increase when the variance in the treated and untreated groups are very different (actually, the untreated group variance is much larger than the treated groups variance).’ <a class="reference external" href="https://doi.org/10.14196%2Fmjiri.32.122">[Valojerdi et al. 2018]</a></p>
</section>
<section id="other-methods">
<h2>Other methods<a class="headerlink" href="#other-methods" title="Link to this heading">#</a></h2>
<p><strong>Important note: These are not approaches that haved turned up in the causal inference literature</strong>, but instead, that I have come across in the context of dealing with a treatment paradox. <em>They will be related to causal inference - I haven’t thought through how. I would advice caution - these are largely not recommended methods for causal inference.</em></p>
<section id="use-treatment-as-the-outcome">
<h3>Use treatment as the outcome<a class="headerlink" href="#use-treatment-as-the-outcome" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://doi.org/10.1111/1471-0528.13859">Cheong-See et al. 2016</a> propose that, when starting a treatment is likely to prevent an adverse outcome, those who received the treatment could also be considered to have experienced the outcome. For example, ‘in women with early-onset pre-eclampsia, if a large proportion of women are delivered at an early preterm gestation (before 34 weeks), then delivery itself could be considered as an outcome (replacing complications that would have occurred in the absence of delivery). In the absence of a standardised protocol for decision to deliver at early preterm gestation, such an approach could help to overcome the limitations in the model as a result of delivery preventing the occurrence of an adverse outcome.’<a class="reference external" href="https://doi.org/10.1111/1471-0528.13859">[Cheong-See et al. 2016]</a></p>
</section>
<section id="the-existence-of-fully-standardised-care-with-no-variation-in-treatment-or-variation-that-you-can-account-for">
<h3>The existence of fully standardised care with no variation in treatment (or variation that you can account for)<a class="headerlink" href="#the-existence-of-fully-standardised-care-with-no-variation-in-treatment-or-variation-that-you-can-account-for" title="Link to this heading">#</a></h3>
<p>This is a scenario where there is complete collinearity between the predictor and the treatment, where the presence of a particular predictor will <strong>always</strong> guarantee the presence of a particular treatment.</p>
<p>However, that requires no variation in treatment - that the <strong>same medications and dosages are always provided at the same treatment thresholds at the same times</strong>. This is not realistic. With the example of management of early-onset pre-eclampsia, such as the commencement of anti-hypertensives and magnesium sulphate, this is somewhat standardised by guidelines [e.g. from the National Institute for Health and Care Excellence (NICE) in the UK], but the <strong>threshold for commencing treatment varies between clinicians and centres</strong>. Furthermore, the <strong>response from a specific antihypertensive and dosage varies between individual patients</strong>.</p>
<p>This limits the applicability of such a strategy, although one could consider the use of multilevel models to allow for any differences between clinicians and treatment centres.’<a class="reference external" href="https://doi.org/10.1111/1471-0528.13859">[Cheong-See et al. 2016]</a></p>
<p>Steer 2016 comments that ‘such models rarely take into account all of the relevant factors (e.g. the coexistence of a modulating pathology such as an autoimmune disorder) or the social and emotional circumstances and preferences of the mother and her family.’<a class="reference external" href="https://doi.org/10.1111/1471-0528.13860">[Steer 2016]</a></p>
</section>
<section id="predictor-substition">
<h3>Predictor substition<a class="headerlink" href="#predictor-substition" title="Link to this heading">#</a></h3>
<p>You could <strong>remove all the predictors upon which the decision to treat is based on</strong>, and substitute them with alternative predictors.</p>
<p>Limitations:</p>
<ul class="simple">
<li><p>Can prevent you from including meaningful predictors in the model</p></li>
<li><p>Other predictors may be correlated with the predictors used to make treatment decisions.</p></li>
</ul>
<p><a class="reference external" href="https://doi.org/10.1111/1471-0528.13859">[Cheong-See et al. 2016]</a></p>
</section>
<section id="incorporation-of-treatment-as-a-predictor-in-the-model">
<h3>Incorporation of treatment as a predictor in the model<a class="headerlink" href="#incorporation-of-treatment-as-a-predictor-in-the-model" title="Link to this heading">#</a></h3>
<p>Another method is to include treatment use as a predictor in the prognostic model.<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a><a class="reference external" href="https://doi.org/10.1503/cmaj.120812">[Schuit et al. 2013]</a> In practice, you won’t be able to input “they have been treated or not” for the as-yet untreated patients - but you could use the model to estimate outcomes in scenarios where they are or are not treated.<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
<p>You could just add the indicator on top of the prognostic model, keeping the original coefficients fixed.<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a> However, if there is an interaction between the effectiveness of treatment and having a predictor (e.g. more effective in those with predictor), then the model will need to account for/incorporate this interaction.<a class="reference external" href="https://doi.org/10.1503/cmaj.120812">[Schuit et al. 2013]</a> Instead therefore, the model could be entirely refitted with the addition of an indicator term for treatment, with the inclusion of interaction terms where anticipated.<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
<p>Limitations:</p>
<ul class="simple">
<li><p>Failure to correctly specify any interactions between treatment and other predictors in the validation set could mean that the effects of treatment are not completely taken into account<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p></li>
<li><p>The addition of a term for treatment to the model that is to be validated may improve the performance beyond that of the original model due to the inclusion of additional predictive information<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p></li>
<li><p>Not possible if everyone in the study had the same intervention (but in that case, it is likely that  unexpected findings are not due to a treatment paradox)<a class="reference external" href="https://doi.org/10.1503/cmaj.120812">[Schuit et al. 2013]</a></p></li>
<li><p>With this approach, ‘differentiating treatment from predictor effects becomes difficult. We could adjust for the interaction between ‘decision to treat’ as a predictor and each of the other prognostic factors in the model; however, when many predictors are involved, or when ‘decision to treat’ is based on multiple predictors, this approach becomes complex. In such situations, extremely large sample sizes are needed for the reliable assessment of interactions.’<a class="reference external" href="https://doi.org/10.1111/1471-0528.13859">[Cheong-See et al. 2016]</a></p></li>
</ul>
<p>Due to the limitations, Pajouheshnia et al. 2017 do not recommend this approach.<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
</section>
<section id="recalibration">
<h3>Recalibration<a class="headerlink" href="#recalibration" title="Link to this heading">#</a></h3>
<p><strong>Don’t yet understand:</strong> ‘The incidence of the predicted outcome may vary between development and validation data sets. If this is the case, the predictions made by the model will not, on average, match the outcome incidence in the validation data set [22]. As discussed in section 2.1, use of an effective treatment in a validation data set will lead to fewer outcome events and thus a lower incidence than there would have been had the validation set remained untreated. One approach to account for this would be to recalibrate the original model using the partially treated validation data set. In a logistic regression model, a derivative of the incidence of the outcome is captured by the intercept term in the model, and thus a simple solution would seem to be to re-estimate the model intercept using the validation data set [23, 24]. In doing this, the average predicted risk provided by the recalibrated model should then be equal to the (observed) overall outcome frequency in the validation set. Further details of this procedure are given in Table ​Table1.1. Where treatment has been randomly allocated, intercept recalibration should indeed account for the risk-lowering effects, provided that the magnitude of the treatment effect does not vary depending on an individual’s risk and thus is constant over the entire predicted probability range. In non-randomized settings, where treatment use by definition is associated with participant characteristics, a simple intercept recalibration is unlikely to be sufficient due to interactions between treatment use and patient characteristics that are predictors in the model. However, although recalibration may seem a suitable solution for modelling the effects of treatment, when applying recalibration, concerns should also be raised over the interpretation of the estimated performance of the model. Differences in outcome incidence between the development data set and validation data set may not be entirely attributable to the effects of treatment use. By recalibrating the model to adjust for differences in treatment use and effects, we simultaneously adjust for differences in case-mix between the development and validation set. As the aim of validation is to evaluate the performance of the original prognostic model, in this case in a treatment-naïve sample, recalibration may actually lead to an optimistic impression of the accuracy of predictions made by the original model in the validation set. For example, if the validation set included individuals with a notably greater prevalence of comorbidities and thus were more likely to develop the outcome, recalibration prior to validation could mask any inadequacies of the model when making predictions in this subset of high-risk individuals.’<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
<p>Due to the limitations, Pajouheshnia et al. 2017 do not recommend this approach.<a class="reference external" href="https://doi.org/10.1186%2Fs12874-017-0375-8">[Pajouheshnia et al. 2017]</a></p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./design_methods"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="design_methods_1_intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Methods #1: Introduction to methods to adjust for confounding</p>
      </div>
    </a>
    <a class="right-next"
       href="design_methods_3_gmethods.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Methods #3: G-methods</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conventional-approaches-for-causal-effect-estimation">Conventional approaches for causal effect estimation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#propensity-scores">Propensity scores</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stratification">Stratification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example">Simple example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mantel-haenszel-formula">Mantel-Haenszel Formula</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stratification-on-the-propensity-score">Stratification on the propensity score</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations-of-stratification">Limitations of stratification</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exclude-treated-individuals">Exclude treated individuals</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matching">Matching</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matching-methods">Matching methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations-of-matching">Limitations of matching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverse-probability-of-treatment-weighting-iptw-with-baseline-covariates">Inverse probability of treatment weighting (IPTW) with baseline covariates</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#strengths-and-limitations">Strengths and limitations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iptw-variants">IPTW variants</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#weight-stabilisation">Weight stabilisation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#propensity-score-trimming-and-truncation">Propensity score trimming and truncation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#augmented-inverse-propensity-weighting-aipw">Augmented inverse propensity weighting (AIPW)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#excluding-treated-individuals">Excluding treated individuals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multivariable-regression">Multivariable regression</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-methods">Other methods</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-treatment-as-the-outcome">Use treatment as the outcome</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-existence-of-fully-standardised-care-with-no-variation-in-treatment-or-variation-that-you-can-account-for">The existence of fully standardised care with no variation in treatment (or variation that you can account for)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#predictor-substition">Predictor substition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#incorporation-of-treatment-as-a-predictor-in-the-model">Incorporation of treatment as a predictor in the model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recalibration">Recalibration</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Amy Heather
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>